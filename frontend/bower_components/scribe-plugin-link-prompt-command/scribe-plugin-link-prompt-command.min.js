define("checks",[],function(){function e(e){return/\w/.test(e)}function n(e){return i.some(function(n){return n.test(e)})}var t=/^https?\:\/\//,r=/^mailto\:/,o=/^tel\:/,i=[t,r,o];return{emptyLink:e,hasKnownProtocol:n}}),define("init",[],function(){function e(e){var e=e||{};return e.transforms||(e.transforms={}),["pre","post"].forEach(function(n){e.transforms[n]||(e.transforms[n]=[])}),e}return{init:e}}),define("prompts",[],function(){function e(e,t){for(var r=0;r<n.length;r++){var o=n[r];if(o.regexp.test(t)){var i=e.confirm(o.message);if(i)return o.action(t)}}return t}var n=[{regexp:/@/,message:"The URL you entered appears to be an email address. Do you want to add the required “mailto:” prefix?",action:function(e){return"mailto:"+e}},{regexp:/\+?\d+/,message:"The URL you entered appears to be a telephone number. Do you want to add the required “tel:” prefix?",action:function(e){return"tel:"+e}},{regexp:/.+/,message:"The URL you entered appears to be a link. Do you want to add the required “http://” prefix?",action:function(e){return"http://"+e}}];return{process:e}}),define("transforms",[],function(){function e(e,n){return e.reduce(function(e,n){return n(e)},n)}return{run:e}}),define("scribe-plugin-link-prompt-command",["./checks","./init","./prompts","./transforms"],function(e,n,t,r){return function(o){var o=n.init(o);return function(n){var i=new n.api.Command("createLink");i.nodeName="A",i.execute=function(i){var a,s=new n.api.Selection,u=s.range,c=s.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this)),f=c?c.href:"";if(a=i?i:window.prompt("Enter a link.",f),a=r.run(o.transforms.pre,a),!e.emptyLink(a))return void window.alert("This link appears empty");if(o&&o.validation){var d=o.validation(a);if(!d.valid)return void window.alert(d.message||"The link is not valid")}c&&(u.selectNode(c),s.selection.removeAllRanges(),s.selection.addRange(u)),a&&(e.hasKnownProtocol(a)||(a=t.process(window,a)),a=r.run(o.transforms.post,a),n.api.SimpleCommand.prototype.execute.call(this,a))},i.queryState=function(){var e=new n.api.Selection;return!!e.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))},n.commands.linkPrompt=i}}});
//# sourceMappingURL=scribe-plugin-link-prompt-command.min.js.map